<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Get Started • abslife</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get Started">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">abslife</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.94</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/get-started.html">Get Started</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get Started</h1>
            
      

      <div class="d-none name"><code>get-started.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://lcgodoy.me/abslife/">abslife</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Welcome to the abslife package!</span></span>
<span><span class="co">#&gt; WARNING: Under construction.</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span> <span class="co">## optional</span></span></code></pre></div>
<blockquote>
<p>Under construction!</p>
</blockquote>
<p>In this vignette, we show the basic functionalities of the
<code>abslife</code> package. <code>abslife</code> provides tools for
non-parametric estimation of the hazard rate, denoted <span class="math inline">\(\lambda(t)\)</span> for time to event data subject
to left-truncation <span class="citation">(Jackson P. Lautier,
Pozdnyakov, and Yan 2023a)</span> and right-censoring <span class="citation">(Jackson P. Lautier, Pozdnyakov, and Yan 2023b)</span>.
The package also allows for scenarios where competing risks <span class="citation">(Jackson P. Lautier, Pozdnyakov, and Yan 2024)</span>
is present. In all cases, asymptotic confidence intervals for the
estimated hazard rates are readily available.</p>
<p>The main functionalities of the package are embedded in the
<code>estimate_hazard</code> function. In particular, the function is
flexible enough to be able to deal with all the cases mentioned in the
previous paragraph: left-truncation, right-censoring, and competing
risks. Moreover, the output <code>estimate_hazard</code> has specific
<code>summary</code> and <code>plot</code> methods, which are helpful in
understanding the results. In the following sections, we will use three
different datasets to exemplify the package functionalities</p>
<div class="section level3">
<h3 id="left-truncation">Left-truncation<a class="anchor" aria-label="anchor" href="#left-truncation"></a>
</h3>
<p>To load the first dataset (called <code>aart</code>), run the chunk
below. In addition to loading the dataset, we are looking at its first
rows using <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code>. This dataset has two columns, one
representing the time-to-event (<code>Xi</code>) and another one the
truncation time (<code>Yi</code>).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">aart</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">aart</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Xi Yi</span></span>
<span><span class="co">#&gt; 1 39 33</span></span>
<span><span class="co">#&gt; 2 39 33</span></span>
<span><span class="co">#&gt; 3 39 33</span></span>
<span><span class="co">#&gt; 4 34 33</span></span>
<span><span class="co">#&gt; 5 35 33</span></span>
<span><span class="co">#&gt; 6 39 33</span></span></code></pre></div>
<p>We estimate the hazard rate using the <code><a href="../reference/estimate_hazard.html">estimate_hazard()</a></code>
function and assign the result to <code>aart_hazard</code>. The
<code>carry_hazard</code> replazes 0 hazard estimates with the last
non-zero hazard estimate.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aart_hazard</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate_hazard.html">estimate_hazard</a></span><span class="op">(</span>time_to_event <span class="op">=</span> <span class="va">aart</span><span class="op">$</span><span class="va">Xi</span>,</span>
<span>                               trunc_time <span class="op">=</span> <span class="va">aart</span><span class="op">$</span><span class="va">Yi</span>,</span>
<span>                               ci_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>                               carry_hazard <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">## need </span></span></code></pre></div>
<p>The function returns a <code>data.frame</code> containing time to
event, the respective hazard estimates, and the standard errors (on the
log scale). It also includes the lower and upper bounds of the hazard
rate confidence interval, which correspond to the confidence level
specified in the <code>ci_level</code> argument. Below, we inspect the
final rows using <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">aart_hazard</span><span class="op">)</span></span>
<span><span class="co">#&gt;    time_to_event          fh          uh hazard se_log_hazard  lower_ci</span></span>
<span><span class="co">#&gt; 40            44 0.000000000 0.001287830    0.5     0.5000000 0.1876589</span></span>
<span><span class="co">#&gt; 41            45 0.000643915 0.001287830    0.5     0.7071068 0.1250488</span></span>
<span><span class="co">#&gt; 42            46 0.000000000 0.000643915    0.5     0.7071068 0.1250488</span></span>
<span><span class="co">#&gt; 43            47 0.000000000 0.000643915    0.5     0.7071068 0.1250488</span></span>
<span><span class="co">#&gt; 44            48 0.000000000 0.000643915    0.5     0.7071068 0.1250488</span></span>
<span><span class="co">#&gt; 45            49 0.000643915 0.000643915    1.0     0.0000000 1.0000000</span></span>
<span><span class="co">#&gt;    upper_ci</span></span>
<span><span class="co">#&gt; 40 1.332204</span></span>
<span><span class="co">#&gt; 41 1.999219</span></span>
<span><span class="co">#&gt; 42 1.999219</span></span>
<span><span class="co">#&gt; 43 1.999219</span></span>
<span><span class="co">#&gt; 44 1.999219</span></span>
<span><span class="co">#&gt; 45 1.000000</span></span></code></pre></div>
<blockquote>
<p>I believe we don’t need to output the <code>fh</code> and
<code>uh</code> columns. What do you think?</p>
</blockquote>
<p>The <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function returns a cleaner output:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aart_hazard</span><span class="op">)</span></span>
<span><span class="co">#&gt;    time_to_event     hazard se_log_hazard    lower_ci   upper_ci</span></span>
<span><span class="co">#&gt; 1              5 0.01904762    0.70034005 0.004827365 0.07515731</span></span>
<span><span class="co">#&gt; 6             10 0.01556420    0.35079121 0.007825874 0.03095429</span></span>
<span><span class="co">#&gt; 11            15 0.02432778    0.22660796 0.015603194 0.03793077</span></span>
<span><span class="co">#&gt; 16            20 0.01724138    0.25596336 0.010439882 0.02847400</span></span>
<span><span class="co">#&gt; 21            25 0.02956705    0.18616745 0.020527782 0.04258671</span></span>
<span><span class="co">#&gt; 26            30 0.03311966    0.17660603 0.023429257 0.04681803</span></span>
<span><span class="co">#&gt; 31            35 0.05163330    0.13912017 0.039310680 0.06781866</span></span>
<span><span class="co">#&gt; 36            40 0.73134328    0.07404587 0.632547761 0.84556935</span></span>
<span><span class="co">#&gt; 41            45 0.50000000    0.70710678 0.125048827 1.99921908</span></span></code></pre></div>
<p>Finally, we can easily visualize the results using the
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">aart_hazard</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/plot_aart-1.png" class="r-plt" width="700"></p>
<p>A <code>ggplot2</code> powered version of the plot is also available,
and allows to visualize multiple levels of confidence at once.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggauto.html">ggauto</a></span><span class="op">(</span><span class="va">aart_hazard</span>, ci_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.75</span>, <span class="fl">.85</span>, <span class="fl">.9</span>, <span class="fl">.95</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/ggplot_aart-1.png" class="r-plt" width="700"></p>
<p>An interesting feature of the package, is that it allows for
calculating the CDF associated with the time to events from using the
hazard function. To achieve that, it suffices to call the
<code>calc_cdf</code> function. That function adds a column (called
<code>cdf</code>) to the output of the <code>estimate_hazard</code>
function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aart_cdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_cdf.html">calc_cdf</a></span><span class="op">(</span><span class="va">aart_hazard</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">aart_cdf</span><span class="op">)</span></span>
<span><span class="co">#&gt;    time_to_event          fh          uh hazard se_log_hazard  lower_ci</span></span>
<span><span class="co">#&gt; 40            44 0.000000000 0.001287830    0.5     0.5000000 0.1876589</span></span>
<span><span class="co">#&gt; 41            45 0.000643915 0.001287830    0.5     0.7071068 0.1250488</span></span>
<span><span class="co">#&gt; 42            46 0.000000000 0.000643915    0.5     0.7071068 0.1250488</span></span>
<span><span class="co">#&gt; 43            47 0.000000000 0.000643915    0.5     0.7071068 0.1250488</span></span>
<span><span class="co">#&gt; 44            48 0.000000000 0.000643915    0.5     0.7071068 0.1250488</span></span>
<span><span class="co">#&gt; 45            49 0.000643915 0.000643915    1.0     0.0000000 1.0000000</span></span>
<span><span class="co">#&gt;    upper_ci       cdf</span></span>
<span><span class="co">#&gt; 40 1.332204 0.9995101</span></span>
<span><span class="co">#&gt; 41 1.999219 0.9997551</span></span>
<span><span class="co">#&gt; 42 1.999219 0.9998775</span></span>
<span><span class="co">#&gt; 43 1.999219 0.9999388</span></span>
<span><span class="co">#&gt; 44 1.999219 0.9999694</span></span>
<span><span class="co">#&gt; 45 1.000000 1.0000000</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="right-censoring">Right-censoring<a class="anchor" aria-label="anchor" href="#right-censoring"></a>
</h3>
<p>Now, we show that we can use an almost identical workflow to deal
analyze right-censored data as well. To achieve that goal, we will load
another dataset, called <code>mbalt</code>. This dataset has three, as
opposed to two, columns. They represent the time-to-event
(<code>Zi</code>), the left-truncation time (<code>Yi</code>), and a
right-censoring indicator (<code>Di</code>).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">mbalt</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mbalt</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Zi Yi Di</span></span>
<span><span class="co">#&gt; 1 37 29  1</span></span>
<span><span class="co">#&gt; 2 30 29  1</span></span>
<span><span class="co">#&gt; 3 37 30  1</span></span>
<span><span class="co">#&gt; 4 32 32  1</span></span>
<span><span class="co">#&gt; 5 37 32  1</span></span>
<span><span class="co">#&gt; 6 36 33  1</span></span></code></pre></div>
<p>Once again, we estimate the hazard rate using the
<code><a href="../reference/estimate_hazard.html">estimate_hazard()</a></code> function and this time assign its result
to <code>mbalt_hazard</code>. The <code>carry_hazard</code> replazes 0
hazard estimates with the last non-zero hazard estimate. Notice, we
added an extra argument to the function call: the <code>censoring</code>
argument, which receives an indicator variable that has 1s if one event
is right censored and 0 otherwise.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mbalt_hazard</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate_hazard.html">estimate_hazard</a></span><span class="op">(</span>time_to_event <span class="op">=</span> <span class="va">mbalt</span><span class="op">$</span><span class="va">Zi</span>,</span>
<span>                                trunc_time <span class="op">=</span> <span class="va">mbalt</span><span class="op">$</span><span class="va">Yi</span>,</span>
<span>                                censoring <span class="op">=</span> <span class="va">mbalt</span><span class="op">$</span><span class="va">Di</span>,</span>
<span>                                ci_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>                                carry_hazard <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">## need </span></span></code></pre></div>
<p>The output is analogous to what we have seen in the previous example,
and we can easily extract some summary as follows:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mbalt_hazard</span><span class="op">)</span></span>
<span><span class="co">#&gt;    time_to_event     hazard se_log_hazard   lower_ci   upper_ci</span></span>
<span><span class="co">#&gt; 27            31 0.05372423    0.02048953 0.05160948 0.05592563</span></span>
<span><span class="co">#&gt; 32            36 0.04244229    0.03464025 0.03965637 0.04542393</span></span></code></pre></div>
<p>The plotting functions also work out of the box:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mbalt_hazard</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/plot_mbalt-1.png" class="r-plt" width="700"></p>
<p>A <code>ggplot2</code> powered version of the plot is also available,
and allows to visualize multiple levels of confidence at once.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggauto.html">ggauto</a></span><span class="op">(</span><span class="va">mbalt_hazard</span>, ci_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.75</span>, <span class="fl">.85</span>, <span class="fl">.9</span>, <span class="fl">.95</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/ggplot_mbalt-1.png" class="r-plt" width="700"></p>
</div>
<div class="section level3">
<h3 id="competing-risks">Competing risks<a class="anchor" aria-label="anchor" href="#competing-risks"></a>
</h3>
<p>Lastly, we show the <code><a href="../reference/estimate_hazard.html">estimate_hazard()</a></code> function features
to deal with competing risks. To showcase those features, we load the
<code>aloans</code> dataset. This dataset contain information on
consumer automobile loans <span class="citation">(Jackson P. Lautier,
Pozdnyakov, and Yan 2024)</span>. To check what each of its columns
represent, take a look at the dataset documentation by running
<code><a href="../reference/aloans.html">help(aloans)</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">aloans</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">aloans</span><span class="op">)</span></span>
<span><span class="co">#&gt;     risk_cat  Z  Y C D R  bond</span></span>
<span><span class="co">#&gt; 1   subprime 42 19 0 0 1 sdart</span></span>
<span><span class="co">#&gt; 2   subprime 50 19 0 1 0 sdart</span></span>
<span><span class="co">#&gt; 3 near_prime 23 19 0 1 0 sdart</span></span>
<span><span class="co">#&gt; 4      prime 70 19 1 0 0 sdart</span></span>
<span><span class="co">#&gt; 5   subprime 21 19 0 1 0 sdart</span></span>
<span><span class="co">#&gt; 6      prime 70 19 0 0 1 sdart</span></span></code></pre></div>
<p>The relevant columns of the dataset for this example are the
following:</p>
<ul>
<li><p><code>Z</code>: time to event</p></li>
<li><p><code>Y</code>: left-truncation</p></li>
<li><p><code>C</code>: right censoring indicator</p></li>
<li><p><code>D</code>: Default indicator (1 represents default, and 0
represents pre-payment)</p></li>
</ul>
<p>The two competing risks in this case are default and pre-payment. We
will create a more informative column to distinguish between those two
events.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aloans</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span><span class="va">aloans</span>, event_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">D</span> <span class="op">==</span> <span class="fl">1</span>, <span class="st">"Defaut"</span>, <span class="st">"Pre-payment"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The package is designed so the workflow is identical as the previous
two examples.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aloans_hazard</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate_hazard.html">estimate_hazard</a></span><span class="op">(</span>time_to_event <span class="op">=</span> <span class="va">aloans</span><span class="op">$</span><span class="va">Z</span>,</span>
<span>                                 trunc_time <span class="op">=</span> <span class="va">aloans</span><span class="op">$</span><span class="va">Y</span>,</span>
<span>                                 censoring <span class="op">=</span> <span class="va">aloans</span><span class="op">$</span><span class="va">C</span>,</span>
<span>                                 event_type <span class="op">=</span> <span class="va">aloans</span><span class="op">$</span><span class="va">event_type</span>,</span>
<span>                                 ci_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>                                 carry_hazard <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">## need </span></span></code></pre></div>
<p>The output is analogous to what we have seen in the previous example,
but now we have an additional column specifing the event type.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aloans_hazard</span><span class="op">)</span></span>
<span><span class="co">#&gt;     event_type time_to_event      hazard se_log_hazard     lower_ci    upper_ci</span></span>
<span><span class="co">#&gt; 1       Defaut             3 0.011520293    0.06431095 0.0101559826 0.013067879</span></span>
<span><span class="co">#&gt; 2       Defaut             8 0.012729470    0.03827262 0.0118095304 0.013721072</span></span>
<span><span class="co">#&gt; 3       Defaut            13 0.010477761    0.04439775 0.0096045507 0.011430360</span></span>
<span><span class="co">#&gt; 4       Defaut            18 0.013350256    0.04167804 0.0123030612 0.014486585</span></span>
<span><span class="co">#&gt; 5       Defaut            23 0.012722853    0.04578351 0.0116309047 0.013917316</span></span>
<span><span class="co">#&gt; 6       Defaut            28 0.013859145    0.04665738 0.0126479922 0.015186275</span></span>
<span><span class="co">#&gt; 7       Defaut            33 0.013032176    0.05157801 0.0117791425 0.014418505</span></span>
<span><span class="co">#&gt; 8       Defaut            38 0.018664205    0.04593909 0.0170571344 0.020422688</span></span>
<span><span class="co">#&gt; 9       Defaut            43 0.011084154    0.06514809 0.0097554744 0.012593798</span></span>
<span><span class="co">#&gt; 10      Defaut            48 0.007673623    0.08449283 0.0065024947 0.009055676</span></span>
<span><span class="co">#&gt; 11      Defaut            53 0.006133755    0.10337666 0.0050087815 0.007511399</span></span>
<span><span class="co">#&gt; 12      Defaut            58 0.006600660    0.49834710 0.0024853843 0.017529971</span></span>
<span><span class="co">#&gt; 13      Defaut            63 0.002898551    0.99854967 0.0004094623 0.020518610</span></span>
<span><span class="co">#&gt; 14      Defaut            68 0.031250000    0.98425098 0.0045399813 0.215102758</span></span>
<span><span class="co">#&gt; 15 Pre-payment             8 0.007686787    0.04937728 0.0069777408 0.008467883</span></span>
<span><span class="co">#&gt; 16 Pre-payment            13 0.011646595    0.04208613 0.0107244538 0.012648026</span></span>
<span><span class="co">#&gt; 17 Pre-payment            18 0.015630141    0.03847409 0.0144948494 0.016854354</span></span>
<span><span class="co">#&gt; 18 Pre-payment            23 0.011372231    0.04845910 0.0103418258 0.012505301</span></span>
<span><span class="co">#&gt; 19 Pre-payment            28 0.015052316    0.04474289 0.0137885345 0.016431929</span></span>
<span><span class="co">#&gt; 20 Pre-payment            33 0.015385696    0.04741284 0.0140203633 0.016883988</span></span>
<span><span class="co">#&gt; 21 Pre-payment            38 0.013687084    0.05378116 0.0123177763 0.015208610</span></span>
<span><span class="co">#&gt; 22 Pre-payment            43 0.018648019    0.05003448 0.0169060937 0.020569423</span></span>
<span><span class="co">#&gt; 23 Pre-payment            48 0.017776306    0.05523028 0.0159525240 0.019808592</span></span>
<span><span class="co">#&gt; 24 Pre-payment            53 0.032053819    0.04462800 0.0293692158 0.034983818</span></span>
<span><span class="co">#&gt; 25 Pre-payment            58 0.037953795    0.20451918 0.0254195682 0.056668570</span></span>
<span><span class="co">#&gt; 26 Pre-payment            63 0.020408163    0.98974332 0.0029331406 0.141995624</span></span>
<span><span class="co">#&gt; 27 Pre-payment            68 0.076923077    0.96076892 0.0117016919 0.505667029</span></span></code></pre></div>
<p>The plotting functions work as in the previous examples:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">aloans_hazard</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/plot_aloans-1.png" class="r-plt" width="700"></p>
<p>A <code>ggplot2</code> powered version of the plot is also
available:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggauto.html">ggauto</a></span><span class="op">(</span><span class="va">aloans_hazard</span>, ci_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.75</span>, <span class="fl">.85</span>, <span class="fl">.9</span>, <span class="fl">.95</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/ggplot_aloans-1.png" class="r-plt" width="700"></p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-lautier2023estimating" class="csl-entry">
Lautier, Jackson P., Vladimir Pozdnyakov, and Jun Yan. 2023a.
<span>“Estimating a Discrete Distribution Subject to Random
Left-Truncation with an Application to Structured Finance.”</span>
<em>Econometrics and Statistics</em>. <a href="https://doi.org/10.1016/j.ecosta.2023.05.005" class="external-link">https://doi.org/10.1016/j.ecosta.2023.05.005</a>.
</div>
<div id="ref-lautier2023pricing" class="csl-entry">
———. 2023b. <span>“Pricing Time-to-Event Contingent Cash Flows:
<span>A</span> Discrete-Time Survival Analysis Approach.”</span>
<em>Insurance: Mathematics and Economics</em> 110: 53–71. <a href="https://doi.org/10.1016/j.insmatheco.2023.02.003" class="external-link">https://doi.org/10.1016/j.insmatheco.2023.02.003</a>.
</div>
<div id="ref-lautier2024convergence" class="csl-entry">
Lautier, Jackson P, Vladimir Pozdnyakov, and Jun Yan. 2024. <span>“On
the Convergence of Credit Risk in Current Consumer Automobile
Loans.”</span> <em>Journal of the Royal Statistical Society Series A:
Statistics in Society</em>, December, qnae137. <a href="https://doi.org/10.1093/jrsssa/qnae137" class="external-link">https://doi.org/10.1093/jrsssa/qnae137</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lucas da Cunha Godoy, Jackson Lautier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
