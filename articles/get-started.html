<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Get Started • abslife</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get Started">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">abslife</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/get-started.html">Get Started</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get Started</h1>
            
      

      <div class="d-none name"><code>get-started.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://lcgodoy.me/abslife/">abslife</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Welcome to the abslife package!</span></span>
<span><span class="co">#&gt; WARNING: Under construction.</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span> <span class="co">## optional</span></span></code></pre></div>
<blockquote>
<p>This package is currently under construction!</p>
</blockquote>
<p>This vignette demonstrates the core functionalities of the
<code>abslife</code> package. <code>abslife</code> provides tools for
estimation of the hazard rate, denoted <span class="math inline">\(\lambda\)</span>, for discrete time-to-event data
subject to <strong>left-truncation</strong> <span class="citation">(Jackson P. Lautier, Pozdnyakov, and Yan 2023a)</span>.
The package is designed so it can additionally handle the following
common observational data challenges:</p>
<ul>
<li><p><strong>+ Right-censoring</strong> <span class="citation">(Jackson P. Lautier, Pozdnyakov, and Yan
2023b)</span></p></li>
<li><p><strong>+ Competing risks</strong> <span class="citation">(Jackson P. Lautier, Pozdnyakov, and Yan
2024)</span></p></li>
</ul>
<p>In all cases, asymptotic confidence intervals for the estimated
hazard rates are readily available. The main function of the package is
the <code><a href="../reference/estimate_hazard.html">estimate_hazard()</a></code> function, which adapts to these
scenarios based on the arguments provided.</p>
<p>Now, we provide specific examples with datasets shipped with the
package.</p>
<div class="section level3">
<h3 id="left-truncation">Left-truncation<a class="anchor" aria-label="anchor" href="#left-truncation"></a>
</h3>
<p>We begin by analyzing the aart dataset. This dataset represents a
scenario involving only left-truncation. It contains two columns:
<code>Xi</code> (time-to-event) and <code>Yi</code> (truncation
time).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">aart</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">aart</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Xi Yi</span></span>
<span><span class="co">#&gt; 1 39 33</span></span>
<span><span class="co">#&gt; 2 39 33</span></span>
<span><span class="co">#&gt; 3 39 33</span></span>
<span><span class="co">#&gt; 4 34 33</span></span>
<span><span class="co">#&gt; 5 35 33</span></span>
<span><span class="co">#&gt; 6 39 33</span></span></code></pre></div>
<p>We estimate the hazard rate using <code><a href="../reference/estimate_hazard.html">estimate_hazard()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aart_hazard</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate_hazard.html">estimate_hazard</a></span><span class="op">(</span>lifetime <span class="op">=</span> <span class="va">aart</span><span class="op">$</span><span class="va">Xi</span>,</span>
<span>                               trunc_time <span class="op">=</span> <span class="va">aart</span><span class="op">$</span><span class="va">Yi</span>,</span>
<span>                               ci_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>                               carry_hazard <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">## need </span></span></code></pre></div>
<blockquote>
<p>Note that we set <code>carry_hazard = TRUE</code>. This argument
ensures that if a hazard estimate is 0, it is replaced by the last
non-zero estimate.</p>
</blockquote>
<p>The function returns a <code>data.frame</code> containing the
evaluation times, the hazard estimates, and the standard errors (on the
log scale). It also includes the lower and upper bounds of the
confidence interval corresponding to the <code>ci_level</code> argument
(in this case, set to 0.95).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">aart_hazard</span><span class="op">)</span></span>
<span><span class="co">#&gt;    lifetime    risk_set hazard se_log_hazard  lower_ci upper_ci</span></span>
<span><span class="co">#&gt; 40       44 0.001287830    0.5     0.5000000 0.1876589        1</span></span>
<span><span class="co">#&gt; 41       45 0.001287830    0.5     0.7071068 0.1250488        1</span></span>
<span><span class="co">#&gt; 42       46 0.000643915    0.5     0.7071068 0.1250488        1</span></span>
<span><span class="co">#&gt; 43       47 0.000643915    0.5     0.7071068 0.1250488        1</span></span>
<span><span class="co">#&gt; 44       48 0.000643915    0.5     0.7071068 0.1250488        1</span></span>
<span><span class="co">#&gt; 45       49 0.000643915    1.0     0.0000000 1.0000000        1</span></span></code></pre></div>
<div class="section level4">
<h4 id="summarizing-and-plotting">Summarizing and plotting<a class="anchor" aria-label="anchor" href="#summarizing-and-plotting"></a>
</h4>
<p>For a concise overview of the estimation, use the
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aart_hazard</span><span class="op">)</span></span>
<span><span class="co">#&gt;    lifetime     hazard se_log_hazard    lower_ci   upper_ci</span></span>
<span><span class="co">#&gt; 1         5 0.01904762    0.70034005 0.004827365 0.07515731</span></span>
<span><span class="co">#&gt; 6        10 0.01556420    0.35079121 0.007825874 0.03095429</span></span>
<span><span class="co">#&gt; 11       15 0.02432778    0.22660796 0.015603194 0.03793077</span></span>
<span><span class="co">#&gt; 16       20 0.01724138    0.25596336 0.010439882 0.02847400</span></span>
<span><span class="co">#&gt; 21       25 0.02956705    0.18616745 0.020527782 0.04258671</span></span>
<span><span class="co">#&gt; 26       30 0.03311966    0.17660603 0.023429257 0.04681803</span></span>
<span><span class="co">#&gt; 31       35 0.05163330    0.13912017 0.039310680 0.06781866</span></span>
<span><span class="co">#&gt; 36       40 0.73134328    0.07404587 0.632547761 0.84556935</span></span>
<span><span class="co">#&gt; 41       45 0.50000000    0.70710678 0.125048827 1.00000000</span></span></code></pre></div>
<p>To visualize the hazard rate, you can use base R graphics via the
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">aart_hazard</span>, ci_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.75</span>, <span class="fl">.85</span>, <span class="fl">.9</span>, <span class="fl">.95</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/plot_aart-1.png" class="r-plt" alt="" width="700"></p>
<p>Alternatively, use <code><a href="../reference/ggauto.html">ggauto()</a></code> for a
<code>ggplot2</code>-powered visualization. This function is
particularly useful for visualizing multiple confidence levels
simultaneously:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggauto.html">ggauto</a></span><span class="op">(</span><span class="va">aart_hazard</span>, ci_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.75</span>, <span class="fl">.85</span>, <span class="fl">.9</span>, <span class="fl">.95</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/ggplot_aart-1.png" class="r-plt" alt="" width="700"></p>
</div>
<div class="section level4">
<h4 id="calculating-the-cdf">Calculating the CDF<a class="anchor" aria-label="anchor" href="#calculating-the-cdf"></a>
</h4>
<p>The package can also derive the Cumulative Distribution Function
(CDF) directly from the hazard estimates using <code><a href="../reference/calc_cdf.html">calc_cdf()</a></code>.
This appends a cdf column to the results.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aart_cdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_cdf.html">calc_cdf</a></span><span class="op">(</span><span class="va">aart_hazard</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aart_cdf</span><span class="op">)</span></span>
<span><span class="co">#&gt;    lifetime        cdf      density</span></span>
<span><span class="co">#&gt; 1         5 0.01904762 0.0190476190</span></span>
<span><span class="co">#&gt; 6        10 0.10628735 0.0141298442</span></span>
<span><span class="co">#&gt; 11       15 0.19848679 0.0199852375</span></span>
<span><span class="co">#&gt; 16       20 0.28713123 0.0125064696</span></span>
<span><span class="co">#&gt; 21       25 0.37058116 0.0191770702</span></span>
<span><span class="co">#&gt; 26       30 0.45756023 0.0185808099</span></span>
<span><span class="co">#&gt; 31       35 0.54922672 0.0245421009</span></span>
<span><span class="co">#&gt; 36       40 0.99118211 0.0240042534</span></span>
<span><span class="co">#&gt; 41       45 0.99975506 0.0002449414</span></span></code></pre></div>
<p>We can also plot the CDF:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">aart_cdf</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/plot_cdf_aart-1.png" class="r-plt" alt="" width="700"></p>
</div>
</div>
<div class="section level3">
<h3 id="right-censoring">Right-censoring<a class="anchor" aria-label="anchor" href="#right-censoring"></a>
</h3>
<p>The workflow for right-censored data is nearly identical. We will
demonstrate this using the <code>mbalt</code> dataset, which includes a
third column, <code>Di</code>, serving as the right-censoring
indicator.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">mbalt</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mbalt</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Zi Yi Di</span></span>
<span><span class="co">#&gt; 1 37 29  1</span></span>
<span><span class="co">#&gt; 2 30 29  1</span></span>
<span><span class="co">#&gt; 3 37 30  1</span></span>
<span><span class="co">#&gt; 4 32 32  1</span></span>
<span><span class="co">#&gt; 5 37 32  1</span></span>
<span><span class="co">#&gt; 6 36 33  1</span></span></code></pre></div>
<p>We call <code><a href="../reference/estimate_hazard.html">estimate_hazard()</a></code> again, but this time we
provide the censoring argument. This argument accepts a vector where
<code>1</code> indicates a censored observation and <code>0</code>
indicates an observed event.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mbalt_hazard</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate_hazard.html">estimate_hazard</a></span><span class="op">(</span>lifetime <span class="op">=</span> <span class="va">mbalt</span><span class="op">$</span><span class="va">Zi</span>,</span>
<span>                                trunc_time <span class="op">=</span> <span class="va">mbalt</span><span class="op">$</span><span class="va">Yi</span>,</span>
<span>                                censoring <span class="op">=</span> <span class="va">mbalt</span><span class="op">$</span><span class="va">Di</span>,</span>
<span>                                ci_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>                                carry_hazard <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co">## need </span></span>
<span><span class="co">#&gt; Warning in check_censored(lifetime, censoring_indicator, support_lifetime_rv):</span></span>
<span><span class="co">#&gt; Warning: Detected censored observations at the maximum limit of the support</span></span>
<span><span class="co">#&gt; (lifetime == max(support_lifetime_rv)). This may lead to identifiability issues</span></span>
<span><span class="co">#&gt; or unstable hazard estimates at the tail.</span></span></code></pre></div>
<p>The output structure remains consistent with the previous
example.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mbalt_hazard</span><span class="op">)</span></span>
<span><span class="co">#&gt;    lifetime     hazard se_log_hazard   lower_ci  upper_ci</span></span>
<span><span class="co">#&gt; 1         5 0.00000000    0.00000000 0.00000000 0.0000000</span></span>
<span><span class="co">#&gt; 6        10 0.00000000    0.00000000 0.00000000 0.0000000</span></span>
<span><span class="co">#&gt; 11       15 0.00000000    0.00000000 0.00000000 0.0000000</span></span>
<span><span class="co">#&gt; 16       20 0.00000000    0.00000000 0.00000000 0.0000000</span></span>
<span><span class="co">#&gt; 21       25 0.00000000    0.00000000 0.00000000 0.0000000</span></span>
<span><span class="co">#&gt; 26       30 0.00000000    0.00000000 0.00000000 0.0000000</span></span>
<span><span class="co">#&gt; 31       35 0.05596574    0.02623112 0.05316113 0.0589183</span></span></code></pre></div>
<p>The plotting functions also work out of the box:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mbalt_hazard</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/plot_mbalt-1.png" class="r-plt" alt="" width="700"></p>
<p>and, for <code>ggplot2</code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggauto.html">ggauto</a></span><span class="op">(</span><span class="va">mbalt_hazard</span>, ci_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.75</span>, <span class="fl">.85</span>, <span class="fl">.9</span>, <span class="fl">.95</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/ggplot_mbalt-1.png" class="r-plt" alt="" width="700"></p>
</div>
<div class="section level3">
<h3 id="competing-risks">Competing risks<a class="anchor" aria-label="anchor" href="#competing-risks"></a>
</h3>
<p>Finally, <code>abslife</code> can estimate hazards in the presence of
competing risks. We use the aloans dataset, which contains data on
consumer automobile loans <span class="citation">(Jackson P. Lautier,
Pozdnyakov, and Yan 2024)</span>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">aloans</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">aloans</span><span class="op">)</span></span>
<span><span class="co">#&gt;     risk_cat  Z  Y C D R  bond</span></span>
<span><span class="co">#&gt; 1   subprime 42 19 0 0 1 sdart</span></span>
<span><span class="co">#&gt; 2   subprime 50 19 0 1 0 sdart</span></span>
<span><span class="co">#&gt; 3 near_prime 23 19 0 1 0 sdart</span></span>
<span><span class="co">#&gt; 4      prime 70 19 1 0 0 sdart</span></span>
<span><span class="co">#&gt; 5   subprime 21 19 0 1 0 sdart</span></span>
<span><span class="co">#&gt; 6      prime 70 19 0 0 1 sdart</span></span></code></pre></div>
<p>The relevant columns of the dataset for this example are the
following:</p>
<ul>
<li><p><code>Z</code>: time to event</p></li>
<li><p><code>Y</code>: left-truncation</p></li>
<li><p><code>C</code>: right censoring indicator</p></li>
<li><p><code>D</code>: Default indicator (1 represents default, and 0
represents pre-payment)</p></li>
</ul>
<p>The two competing risks in this case are default and pre-payment. To
make the results more interpretable, we create a descriptive event_type
column.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aloans</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span><span class="va">aloans</span>, event_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">D</span> <span class="op">==</span> <span class="fl">1</span>, <span class="st">"Defaut"</span>, <span class="st">"Pre-payment"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The package is designed so the workflow is identical as the previous
two examples. The only change here is passing the column discriminating
the event types to the <code>event_type argument</code> in
<code><a href="../reference/estimate_hazard.html">estimate_hazard()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aloans_hazard</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate_hazard.html">estimate_hazard</a></span><span class="op">(</span>lifetime <span class="op">=</span> <span class="va">aloans</span><span class="op">$</span><span class="va">Z</span>,</span>
<span>                                 trunc_time <span class="op">=</span> <span class="va">aloans</span><span class="op">$</span><span class="va">Y</span>,</span>
<span>                                 censoring <span class="op">=</span> <span class="va">aloans</span><span class="op">$</span><span class="va">C</span>,</span>
<span>                                 event_type <span class="op">=</span> <span class="va">aloans</span><span class="op">$</span><span class="va">event_type</span>,</span>
<span>                                 ci_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>                                 carry_hazard <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co">## need </span></span>
<span><span class="co">#&gt; Warning in check_censored(lifetime, censoring_indicator, support_lifetime_rv):</span></span>
<span><span class="co">#&gt; Warning: Detected censored observations at the maximum limit of the support</span></span>
<span><span class="co">#&gt; (lifetime == max(support_lifetime_rv)). This may lead to identifiability issues</span></span>
<span><span class="co">#&gt; or unstable hazard estimates at the tail.</span></span></code></pre></div>
<p>The output now includes a column specifying the event type for each
hazard estimate.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aloans_hazard</span><span class="op">)</span></span>
<span><span class="co">#&gt;     event_type lifetime      hazard se_log_hazard    lower_ci    upper_ci</span></span>
<span><span class="co">#&gt; 1       Defaut        3 0.011520293    0.06431095 0.010155983 0.013067879</span></span>
<span><span class="co">#&gt; 2       Defaut        8 0.012729470    0.03827262 0.011809530 0.013721072</span></span>
<span><span class="co">#&gt; 3       Defaut       13 0.010477761    0.04439775 0.009604551 0.011430360</span></span>
<span><span class="co">#&gt; 4       Defaut       18 0.013350256    0.04167804 0.012303061 0.014486585</span></span>
<span><span class="co">#&gt; 5       Defaut       23 0.012722853    0.04578351 0.011630905 0.013917316</span></span>
<span><span class="co">#&gt; 6       Defaut       28 0.013859145    0.04665738 0.012647992 0.015186275</span></span>
<span><span class="co">#&gt; 7       Defaut       33 0.013032176    0.05157801 0.011779142 0.014418505</span></span>
<span><span class="co">#&gt; 8       Defaut       38 0.018664205    0.04593909 0.017057134 0.020422688</span></span>
<span><span class="co">#&gt; 9       Defaut       43 0.011084154    0.06514809 0.009755474 0.012593798</span></span>
<span><span class="co">#&gt; 10      Defaut       48 0.007673623    0.08449283 0.006502495 0.009055676</span></span>
<span><span class="co">#&gt; 11      Defaut       53 0.006133755    0.10337666 0.005008781 0.007511399</span></span>
<span><span class="co">#&gt; 12      Defaut       58 0.006600660    0.49834710 0.002485384 0.017529971</span></span>
<span><span class="co">#&gt; 13      Defaut       63 0.000000000    0.00000000 0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; 14      Defaut       68 0.000000000    0.00000000 0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; 15 Pre-payment        3 0.000000000    0.00000000 0.000000000 0.000000000</span></span>
<span><span class="co">#&gt; 16 Pre-payment        8 0.007686787    0.04937728 0.006977741 0.008467883</span></span>
<span><span class="co">#&gt; 17 Pre-payment       13 0.011646595    0.04208613 0.010724454 0.012648026</span></span>
<span><span class="co">#&gt; 18 Pre-payment       18 0.015630141    0.03847409 0.014494849 0.016854354</span></span>
<span><span class="co">#&gt; 19 Pre-payment       23 0.011372231    0.04845910 0.010341826 0.012505301</span></span>
<span><span class="co">#&gt; 20 Pre-payment       28 0.015052316    0.04474289 0.013788534 0.016431929</span></span>
<span><span class="co">#&gt; 21 Pre-payment       33 0.015385696    0.04741284 0.014020363 0.016883988</span></span>
<span><span class="co">#&gt; 22 Pre-payment       38 0.013687084    0.05378116 0.012317776 0.015208610</span></span>
<span><span class="co">#&gt; 23 Pre-payment       43 0.018648019    0.05003448 0.016906094 0.020569423</span></span>
<span><span class="co">#&gt; 24 Pre-payment       48 0.017776306    0.05523028 0.015952524 0.019808592</span></span>
<span><span class="co">#&gt; 25 Pre-payment       53 0.032053819    0.04462800 0.029369216 0.034983818</span></span>
<span><span class="co">#&gt; 26 Pre-payment       58 0.037953795    0.20451918 0.025419568 0.056668570</span></span>
<span><span class="co">#&gt; 27 Pre-payment       63 0.020408163    0.98974332 0.002933141 0.141995624</span></span>
<span><span class="co">#&gt; 28 Pre-payment       68 0.076923077    0.96076892 0.011701692 0.505667029</span></span></code></pre></div>
<p>The plotting functions work as in the previous examples, handling the
stratification by event type automatically:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">aloans_hazard</span>, ci_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.75</span>, <span class="fl">.85</span>, <span class="fl">.9</span>, <span class="fl">.95</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/plot_aloans-1.png" class="r-plt" alt="" width="700"></p>
<p>The same holds for the <code>ggplot2</code> powered plots:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggauto.html">ggauto</a></span><span class="op">(</span><span class="va">aloans_hazard</span>, ci_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.75</span>, <span class="fl">.85</span>, <span class="fl">.9</span>, <span class="fl">.95</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="get-started_files/figure-html/ggplot_aloans-1.png" class="r-plt" alt="" width="700"></p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-lautier2023estimating" class="csl-entry">
Lautier, Jackson P., Vladimir Pozdnyakov, and Jun Yan. 2023a.
<span>“Estimating a Discrete Distribution Subject to Random
Left-Truncation with an Application to Structured Finance.”</span>
<em>Econometrics and Statistics</em>. <a href="https://doi.org/10.1016/j.ecosta.2023.05.005" class="external-link">https://doi.org/10.1016/j.ecosta.2023.05.005</a>.
</div>
<div id="ref-lautier2023pricing" class="csl-entry">
———. 2023b. <span>“Pricing Time-to-Event Contingent Cash Flows:
<span>A</span> Discrete-Time Survival Analysis Approach.”</span>
<em>Insurance: Mathematics and Economics</em> 110: 53–71. <a href="https://doi.org/10.1016/j.insmatheco.2023.02.003" class="external-link">https://doi.org/10.1016/j.insmatheco.2023.02.003</a>.
</div>
<div id="ref-lautier2024convergence" class="csl-entry">
Lautier, Jackson P, Vladimir Pozdnyakov, and Jun Yan. 2024. <span>“On
the Convergence of Credit Risk in Current Consumer Automobile
Loans.”</span> <em>Journal of the Royal Statistical Society Series A:
Statistics in Society</em>, December, qnae137. <a href="https://doi.org/10.1093/jrsssa/qnae137" class="external-link">https://doi.org/10.1093/jrsssa/qnae137</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lucas da Cunha Godoy, Jackson Lautier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
